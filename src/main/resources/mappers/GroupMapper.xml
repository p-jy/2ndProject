<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.kh.spring.dao.GroupDAO">
	
	<select id="selectGroupList" resultType="GroupVO">
		select
			*
		from `group`
		where gr_public="Y"
		order by gr_num desc
		
	</select>
	
	<insert id="insertGroup" useGeneratedKeys="true" keyProperty="group.gr_num">
		insert into `group`
			(gr_name, gr_pw, gr_introduction
			, gr_start_date, gr_period,  gr_participant
			, gr_personnel, gr_public) 
		values
			(#{group.gr_name},#{group.gr_pw} ,#{group.gr_introduction}
			,#{group.gr_start_date},#{group.gr_period}, 1
			,#{group.gr_personnel},#{group.gr_public})			
	</insert>
	
	<select id="selectGroup" resultType="GroupVO">
		select
			*
		from `group`
		where gr_num =#{gr_num} and gr_public="Y"
	</select>
	
	<update id="deleteGroup">
		update 
			`group`
		set
			gr_public = "N",
			gr_personnel=0,
			gr_participant=0,
		where
			gr_num=#{gr_num}
	</update>
  
</mapper>
